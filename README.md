# Втора лабораториска вежба по Софтверско инженерство
### Елена Михаилова 192032
#### Control Flow Graph
Во кодот има бројка на секоја линија којашто соодвествува на јазолот во графот.
![cfg](https://raw.githubusercontent.com/elena-mihailova/SI_2025_lab2_192032/refs/heads/master/CFG%20192032.png)
#### Цикломатска комплексност
Вкупно имаме 8 предикатни јазли.

Користејќи ја формулата V(G) = P + 1, каде P е бројот на предикатни јазли:
V(G) = 8 + 1 = 9

Значи, цикломатската комплексност на дадениот код е 9.
# Тест случаи според критериумот Every Statement
За да се покријат сите искази во кодот, потребни се минимум **3 тест случаи**
## Тест Случај 1: `allItems` е `null`

- **Објаснување:** Проверува дали се фрла исклучок кога `allItems` е `null`.  
- **Влезни податоци:**
`allItems: null`
- **Очекуван резултат:**  
`RuntimeException` со порака `"allItems list can't be null!"`
## Тест Случај 2: Листа со еден валиден item, но невалиден број на картичка

- **Објаснување:** Проверува обработка на валиден item и невалиден број на картичка.  
- **Влезни податоци:**
  - `allItems: Листа со еден предмет со валидно име, цена < 300, попуст = 0, количина < 10`
  - `cardNumber: null или невалиден број`
- **Очекуван резултат:**  
`RuntimeException` со порака `"Invalid card number!"`
## Тест Случај 3: Листа со два item-и и валиден број на картичка

- **Објаснување:** Проверува целосна обработка на item-и и валидација на број на картичка.  
- **Влезни податоци:**
  - `allItems:` Листа со два предмета:
  - `item 1:` цена > 300, попуст > 0, количина > 10
  - `item 2:` валиден предмет со попуст > 0
  - `cardNumber`: валиден 16-цифрен број
- **Очекуван резултат:**  
Точно пресметана сума.

# Тест случаи според критериумот Multiple Condition
**Минимален број на тест случаи:**  
За да се постигне **Multiple Condition Coverage** за логичкиот израз со 3 услови, потребни се **8 тест случаи** (сите можни комбинации на `true`/`false` вредности за секој услов).

---

## Тест Случаи

### Тест Случај 1: Сите услови `false`
- **Услови:**  
  `price ≤ 300`, `discount ≤ 0`, `quantity ≤ 10`
- **Влезни податоци:**  
  `Item(price=300, discount=0, quantity=10)`
- **Очекуван резултат:**  
  Сумата **нема** да се намали за 30.  
  Пример: `sum = (300 * 10) = 3000`

---

### Тест Случај 2: `price > 300` (`true`), останатите `false`
- **Услови:**  
  `price=301`, `discount=0`, `quantity=10`
- **Очекуван резултат:**  
  Сумата ќе се намали за 30.  
  Пример: `sum = (301 * 10) - 30 = 2980`

---

### Тест Случај 3: `discount > 0` (`true`), останатите `false`
- **Услови:**  
  `price=300`, `discount=0.1`, `quantity=10`
- **Очекуван резултат:**  
  Сумата ќе се намали за 30.  
  Пример: `sum = (300 * 0.9 * 10) - 30 = 2670`

---

### Тест Случај 4: `quantity > 10` (`true`), останатите `false`
- **Услови:**  
  `price=300`, `discount=0`, `quantity=11`
- **Очекуван резултат:**  
  Сумата ќе се намали за 30.  
  Пример: `sum = (300 * 11) - 30 = 3270`

---

### Тест Случај 5: `price > 300` и `discount > 0` (`true`), `quantity ≤ 10` (`false`)
- **Услови:**  
  `price=301`, `discount=0.1`, `quantity=10`
- **Очекуван резултат:**  
  Сумата ќе се намали за 30.  
  Пример: `sum = (301 * 0.9 * 10) - 30 = 2679`

---

### Тест Случај 6: `price > 300` и `quantity > 10` (`true`), `discount ≤ 0` (`false`)
- **Услови:**  
  `price=301`, `discount=0`, `quantity=11`
- **Очекуван резултат:**  
  Сумата ќе се намали за 30.  
  Пример: `sum = (301 * 11) - 30 = 3281`

---

### Тест Случај 7: `discount > 0` и `quantity > 10` (`true`), `price ≤ 300` (`false`)
- **Услови:**  
  `price=300`, `discount=0.1`, `quantity=11`
- **Очекуван резултат:**  
  Сумата ќе се намали за 30.  
  Пример: `sum = (300 * 0.9 * 11) - 30 = 2940`

---

### Тест Случај 8: Сите услови `true`
- **Услови:**  
  `price=301`, `discount=0.1`, `quantity=11`
- **Очекуван резултат:**  
  Сумата ќе се намали за 30.  
  Пример: `sum = (301 * 0.9 * 11) - 30 = 2949.9`

---

### Објаснување
Секој тест случај ги проверува сите можни комбинации на условите во изразот `if (item.getPrice() > 300 || item.getDiscount() > 0 || item.getQuantity() > 10)`.  
- **Multiple Condition Coverage** бара секој услов да се тестира во секоја можна комбинација со другите услови.

# Објаснување на напишаните unit tests
### `everyStatementTest()`

**Цел:** Да осигураме дека сите искази во кодот се извршени барем еднаш.

#### 1. Тест случај: `allItems = null`
`assertThrows(RuntimeException.class, () -> SILab2.checkCart(null, "1234567890123456"));`
- **Влез:** `allItems = null`, `cardNumber = "1234567890123456"`
- **Очекуван резултат:** `RuntimeException` со порака `"allItems list can't be null!"`

#### 2. Тест случај: Невалиден број на картичка
- `List<Item> items = List.of(new Item("Item1", 5, 200, 0));`
- `assertThrows(RuntimeException.class, () -> SILab2.checkCart(items, null));`
- `assertThrows(RuntimeException.class, () -> SILab2.checkCart(items, "123456"));`
- **Влез:** 
  - `allItems` содржи еден валиден предмет
  - `cardNumber = null` или `"123456"`
- **Очекуван резултат:** `RuntimeException` со порака `"Invalid card number!"`

#### 3. Тест случај: Валидни податоци
- **Влез:** 
  - `allItems` содржи два предмети:
    - Предмет 1: `price=350`, `discount=0.1`, `quantity=15`
    - Предмет 2: `price=200`, `discount=0.2`, `quantity=5`
  - `cardNumber = "1234567890123456"`
- **Очекуван резултат:** Точно пресметана сума (`4205.0`).

## Тестови за Multiple Condition критериумот
### `multipleConditionTest()`

**Цел:** Да се тестираат сите можни комбинации на условите во изразот:  
`if (item.getPrice() > 300 || item.getDiscount() > 0 || item.getQuantity() > 10)`

| Услови                      | Примерни вредности          | Очекуван резултат       |
|-----------------------------|-----------------------------|-------------------------|
| `price ≤ 300`, `discount ≤ 0`, `quantity ≤ 10` | `price=300`, `discount=0`, `quantity=10` | Сума без одземање на 30 |
| `price > 300`               | `price=301`, `discount=0`, `quantity=10` | Сума - 30              |
| `discount > 0`              | `price=300`, `discount=0.1`, `quantity=10` | Сума - 30              |
| `quantity > 10`             | `price=300`, `discount=0`, `quantity=11` | Сума - 30              |
| `price > 300` и `discount > 0` | `price=301`, `discount=0.1`, `quantity=10` | Сума - 30              |
| `price > 300` и `quantity > 10` | `price=301`, `discount=0`, `quantity=11` | Сума - 30              |
| `discount > 0` и `quantity > 10` | `price=300`, `discount=0.1`, `quantity=11` | Сума - 30              |
| Сите услови `true`          | `price=301`, `discount=0.1`, `quantity=11` | Сума - 30              |

---
